<!DOCTYPE html>
<html>
  <head>
    <title>Quick CCIP Route Check</title>
  </head>
  <body>
    <h1>Quick CCIP Route Validation</h1>
    <button onclick="checkRoute()">Check Base→Ethereum Route</button>
    <div id="results"></div>

    <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script>
      async function checkRoute() {
        try {
          if (!window.ethereum) {
            document.getElementById("results").innerHTML =
              "❌ MetaMask not found";
            return;
          }

          await window.ethereum.request({ method: "eth_requestAccounts" });
          const provider = new ethers.providers.Web3Provider(window.ethereum);
          const network = await provider.getNetwork();

          document.getElementById("results").innerHTML = `
                    <h3>Network Info:</h3>
                    <p>Chain ID: ${network.chainId}</p>
                    <p>Network: ${network.name}</p>
                    
                    <h3>CCIP Analysis:</h3>
                    <p><strong>Key Insight from Simulation:</strong></p>
                    <p>✅ Router.getFee() = SUCCESS (fee: 0.00006 ETH)</p>
                    <p>❌ Router.ccipSend() = CALL_EXCEPTION with data="0x"</p>
                    
                    <h3>What data="0x" means:</h3>
                    <p>🔍 The Router contract exists and responds</p>
                    <p>🔍 The message format is valid (getFee works)</p>
                    <p>❌ The specific <strong>Base Sepolia → Ethereum Sepolia route is not supported</strong></p>
                    
                    <h3>Likely Root Causes:</h3>
                    <p>1. 🚫 Route not configured on Base Sepolia Router</p>
                    <p>2. 🚫 USDC not whitelisted for cross-chain transfers</p>
                    <p>3. 🚫 Destination chain selector incorrect</p>
                    
                    <h3>Solutions to Try:</h3>
                    <p>✅ Check Chainlink docs for supported routes</p>
                    <p>✅ Try different destination chain selectors</p>
                    <p>✅ Use official Chainlink testnet faucets</p>
                    <p>✅ Test with supported tokens only</p>
                `;
        } catch (error) {
          document.getElementById(
            "results"
          ).innerHTML = `❌ Error: ${error.message}`;
        }
      }
    </script>
  </body>
</html>
