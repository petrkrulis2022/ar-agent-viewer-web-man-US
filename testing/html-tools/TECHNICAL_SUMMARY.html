<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AR Agent Viewer Web - Technical Summary & API Documentation</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 1000px;
        margin: 0 auto;
        padding: 40px 20px;
        background-color: #fff;
      }

      h1 {
        color: #1e40af;
        border-bottom: 3px solid #3b82f6;
        padding-bottom: 15px;
        margin-bottom: 30px;
        font-size: 2.5em;
      }

      h2 {
        color: #1e3a8a;
        margin-top: 40px;
        margin-bottom: 20px;
        border-left: 5px solid #3b82f6;
        padding-left: 20px;
        font-size: 1.8em;
      }

      h3 {
        color: #1f2937;
        margin-top: 25px;
        font-size: 1.4em;
      }

      h4 {
        color: #374151;
        font-weight: 600;
        font-size: 1.2em;
      }

      code {
        background-color: #f3f4f6;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
        font-size: 0.9em;
      }

      pre {
        background-color: #1f2937;
        color: #f9fafb;
        border-radius: 8px;
        padding: 20px;
        overflow-x: auto;
        font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
        font-size: 0.85em;
        margin: 20px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      pre code {
        background: none;
        color: inherit;
        padding: 0;
      }

      .architecture-diagram {
        background-color: #f0f9ff;
        border: 2px solid #0ea5e9;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        font-family: monospace;
        white-space: pre;
        overflow-x: auto;
      }

      .tech-stack-box {
        background-color: #ecfdf5;
        border: 2px solid #10b981;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .api-endpoint {
        background-color: #fef7ff;
        border: 1px solid #d946ef;
        border-radius: 6px;
        padding: 15px;
        margin: 15px 0;
      }

      .warning-box {
        background-color: #fef3c7;
        border: 1px solid #f59e0b;
        border-radius: 6px;
        padding: 15px;
        margin: 15px 0;
      }

      .info-box {
        background-color: #dbeafe;
        border: 1px solid #3b82f6;
        border-radius: 6px;
        padding: 15px;
        margin: 15px 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 0.9em;
      }

      th,
      td {
        border: 1px solid #d1d5db;
        padding: 12px;
        text-align: left;
      }

      th {
        background-color: #f3f4f6;
        font-weight: 600;
      }

      .emoji {
        font-size: 1.2em;
        margin-right: 8px;
      }

      ul,
      ol {
        padding-left: 25px;
      }

      li {
        margin-bottom: 8px;
      }

      .footer {
        margin-top: 60px;
        padding-top: 30px;
        border-top: 3px solid #e5e7eb;
        text-align: center;
        color: #6b7280;
        font-style: italic;
      }

      .metadata {
        background-color: #f8fafc;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .code-block {
        position: relative;
      }

      .language-label {
        position: absolute;
        top: 10px;
        right: 15px;
        background-color: #374151;
        color: #f9fafb;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75em;
        font-weight: 500;
      }

      @media print {
        body {
          margin: 0;
          padding: 20px;
        }
        .page-break {
          page-break-before: always;
        }
      }
    </style>
  </head>
  <body>
    <div class="metadata">
      <h1>🚀 AR Agent Viewer Web - Technical Summary & API Documentation</h1>
      <p>
        <strong>Project:</strong> AR Agent Viewer Web (US Market QR
        Integration)<br />
        <strong>Date:</strong> August 25, 2025<br />
        <strong>Repository:</strong> ar-agent-viewer-web-man-US<br />
        <strong>Environment:</strong> Development (localhost:5173)
      </p>
    </div>

    <h2><span class="emoji">🏗️</span>System Architecture</h2>

    <div class="architecture-diagram">
      ┌─────────────────────────────────────────────────────────────────┐ │ AR
      AGENT VIEWER WEB │
      ├─────────────────────────────────────────────────────────────────┤ │
      Frontend Layer (React + Vite) │ │ ┌─────────────────┐ ┌─────────────────┐
      ┌─────────────────┐ │ │ │ AR/3D Engine │ │ Wallet Manager │ │ QR Generator
      │ │ │ │ (Three.js) │ │ (Multi-chain) │ │ (Multi-format) │ │ │
      └─────────────────┘ └─────────────────┘ └─────────────────┘ │
      ├─────────────────────────────────────────────────────────────────┤ │
      Service Layer │ │ ┌─────────────────┐ ┌─────────────────┐
      ┌─────────────────┐ │ │ │ Payment Processor│ │ QR Service │ │ AR Manager │
      │ │ │ (Multi-chain) │ │ (EIP-681/SPay) │ │ (Positioning) │ │ │
      └─────────────────┘ └─────────────────┘ └─────────────────┘ │
      ├─────────────────────────────────────────────────────────────────┤ │
      Blockchain Integration Layer │ │ ┌─────────┐ ┌─────────┐ ┌─────────┐
      ┌─────────┐ ┌─────────┐ │ │ │ Hedera │ │ Solana │ │ Morph │ │BlockDAG │
      │Ethereum │ │ │ │Testnet │ │Mainnet │ │Holesky │ │Testnet │ │Mainnet │ │ │
      └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │
      ├─────────────────────────────────────────────────────────────────┤ │ Data
      Layer │ │ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │ │
      │ Supabase DB │ │ Local Storage │ │ Blockchain │ │ │ │ (PostgreSQL) │ │
      (Browser) │ │ (Distributed) │ │ │ └─────────────────┘ └─────────────────┘
      └─────────────────┘ │
      └─────────────────────────────────────────────────────────────────┘
    </div>

    <h2><span class="emoji">🛠️</span>Technical Stack</h2>

    <div class="tech-stack-box">
      <h3>Core Technologies</h3>
      <div class="code-block">
        <div class="language-label">JSON</div>
        <pre><code>{
  "runtime": "Node.js 18+",
  "framework": "React 19.1.0",
  "bundler": "Vite 6.3.5",
  "language": "JavaScript (ES2022)",
  "styling": "Tailwind CSS 4.1.7",
  "3d_engine": "Three.js 0.178.0",
  "ui_library": "Radix UI Components",
  "package_manager": "pnpm 10.4.1"
}</code></pre>
      </div>
    </div>

    <h3>Blockchain Libraries</h3>
    <div class="code-block">
      <div class="language-label">JSON</div>
      <pre><code>{
  "ethereum": {
    "thirdweb": "5.105.16",
    "thirdweb_react": "4.9.4"
  },
  "solana": {
    "web3js": "1.98.2",
    "wallet_adapter": "0.15.39",
    "spl_token": "0.4.13"
  },
  "multi_chain": {
    "wallet_connect": "MetaMask integration",
    "payment_standards": ["EIP-681", "Solana Pay"]
  }
}</code></pre>
    </div>

    <h3>Database & Backend</h3>
    <div class="code-block">
      <div class="language-label">JSON</div>
      <pre><code>{
  "database": "Supabase PostgreSQL",
  "real_time": "Supabase Subscriptions",
  "authentication": "Supabase Auth",
  "storage": "Supabase Storage",
  "connection": "https://ncjbwzibnqrbrvicdmec.supabase.co"
}</code></pre>
    </div>

    <div class="page-break"></div>

    <h2><span class="emoji">📡</span>API Documentation</h2>

    <h3>1. QR Code Service API</h3>
    <div class="api-endpoint">
      <strong>File:</strong> <code>src/services/qrCodeService.js</code>

      <h4>Core Methods</h4>
      <div class="code-block">
        <div class="language-label">JavaScript</div>
        <pre><code>/**
 * Generate AR QR Code for multi-blockchain payments
 * @param {number} amount - Payment amount in USD
 * @param {string} recipient - Wallet address to receive payment
 * @param {string} blockchain - Target blockchain
 * @param {string} agentName - Agent name for transaction reference
 * @returns {Promise&lt;Object&gt;} QR code data and transaction info
 */
async generateARQRCode(amount, recipient, blockchain, agentName)

/**
 * Create QR positioning for AR space
 * @param {number} index - QR code index
 * @param {number} total - Total number of QR codes
 * @returns {Object} Position coordinates {x, y, z}
 */
createQRPosition(index, total)

/**
 * Update QR code status in database
 * @param {string} qrId - QR code identifier
 * @param {string} status - New status ('pending', 'scanned', 'completed', 'failed')
 * @param {Object} additionalData - Extra status data
 */
async updateQRCodeStatus(qrId, status, additionalData)</code></pre>
      </div>

      <h4>Response Format</h4>
      <div class="code-block">
        <div class="language-label">JSON</div>
        <pre><code>{
  "qrCodeData": "ethereum:0x9E12AD42c4E4d2acFBADE01a96446e48e6764B98@2810/transfer?address=0x1234...&uint256=1000000000000000000",
  "transactionId": "tx_1738174800000_ai_assistant",
  "blockchain": "morph",
  "amount": 1000000000000000000,
  "recipient": "0x1234...",
  "metadata": {
    "agentName": "AI Assistant",
    "timestamp": 1738174800000,
    "chainId": "2810"
  }
}</code></pre>
      </div>
    </div>

    <h3>2. Payment Processor API</h3>
    <div class="api-endpoint">
      <strong>File:</strong> <code>src/services/paymentProcessor.js</code>

      <h4>Supported Networks</h4>
      <table>
        <thead>
          <tr>
            <th>Network</th>
            <th>Chain ID</th>
            <th>RPC URL</th>
            <th>Explorer</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>BlockDAG Testnet</td>
            <td>1043</td>
            <td>https://testnet-rpc.primordial.network</td>
            <td>https://test-explorer.primordial.bdagscan.com/</td>
          </tr>
          <tr>
            <td>Morph Holesky</td>
            <td>2810</td>
            <td>https://rpc-quicknode-holesky.morphl2.io</td>
            <td>https://explorer-holesky.morphl2.io</td>
          </tr>
          <tr>
            <td>Hedera Testnet</td>
            <td>296</td>
            <td>https://testnet.hashio.io/api</td>
            <td>https://hashscan.io/testnet</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>3. Supabase Database API</h3>
    <div class="api-endpoint">
      <strong>File:</strong> <code>src/lib/supabase.js</code>

      <h4>Database Schema</h4>
      <div class="code-block">
        <div class="language-label">SQL</div>
        <pre><code>-- deployed_objects table (agents)
CREATE TABLE deployed_objects (
  id UUID PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  latitude DOUBLE PRECISION,
  longitude DOUBLE PRECISION,
  altitude DOUBLE PRECISION,
  agent_type TEXT,
  user_id TEXT,
  token_address TEXT,
  chain_id TEXT,
  deployer_wallet_address TEXT,
  interaction_fee DECIMAL,
  currency_type TEXT DEFAULT 'USDT',
  network TEXT DEFAULT 'Morph',
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ar_qr_codes table (QR tracking)
CREATE TABLE ar_qr_codes (
  id UUID PRIMARY KEY,
  agent_id UUID REFERENCES deployed_objects(id),
  payment_uri TEXT NOT NULL,
  status TEXT DEFAULT 'pending',
  transaction_hash TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  scanned_at TIMESTAMP,
  updated_at TIMESTAMP DEFAULT NOW()
);</code></pre>
      </div>
    </div>

    <div class="page-break"></div>

    <h2><span class="emoji">🔄</span>Data Flow Diagrams</h2>

    <h3>Payment Processing Flow</h3>
    <div class="info-box">
      <strong
        >User Scans QR → Parse Payment URI → Validate Data → Connect
        Wallet</strong
      ><br />
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓<br />
      <strong
        >Switch Network → Execute Transaction → Monitor Status → Update
        Database</strong
      ><br />
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓<br />
      <strong>Show Success → Open Explorer → Log Result → Notify User</strong>
    </div>

    <h3>Agent Discovery Flow</h3>
    <div class="info-box">
      <strong
        >Get Location → Query Supabase → Filter by Distance → Render in
        AR</strong
      ><br />
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      ↓<br />
      <strong
        >Load 3D Models → Position Agents → Add Interactions → Display
        UI</strong
      >
    </div>

    <h2><span class="emoji">🎨</span>Component API Documentation</h2>

    <h3>1. UnifiedWalletConnect Component</h3>
    <div class="code-block">
      <div class="language-label">TypeScript</div>
      <pre><code>// Props Interface
interface UnifiedWalletConnectProps {
  onConnectionChange?: (connectionData: Object) => void;
}

// Connection Data Format
{
  blockchain: string,
  connected: boolean,
  accountId?: string,
  networkId?: string,
  walletType: string
}</code></pre>
    </div>

    <h3>2. EnhancedPaymentQRModal Component</h3>
    <div class="code-block">
      <div class="language-label">TypeScript</div>
      <pre><code>// Props Interface
interface EnhancedPaymentQRModalProps {
  isOpen: boolean;
  onClose: () => void;
  agentName: string;
  amount: number;
  onPaymentSuccess?: (transactionData: Object) => void;
}

// Methods
const handleBlockchainSelect = (blockchain) => {
  /* Network selection */
};
const generateQRCode = async (blockchain) => {
  /* QR generation */
};
const startPaymentMonitoring = (transactionId) => {
  /* Payment tracking */
};</code></pre>
    </div>

    <h2><span class="emoji">🔐</span>Security & Authentication</h2>

    <h3>Wallet Security</h3>
    <div class="code-block">
      <div class="language-label">JavaScript</div>
      <pre><code>// Wallet connection validation
const validateWalletConnection = async () => {
  if (!window.ethereum) throw new Error("Wallet not detected");

  const accounts = await window.ethereum.request({
    method: "eth_requestAccounts",
  });

  if (!accounts?.length) throw new Error("No accounts found");
  return accounts[0];
};</code></pre>
    </div>

    <h3>Transaction Security</h3>
    <div class="code-block">
      <div class="language-label">JavaScript</div>
      <pre><code>// Payment data validation
const validatePaymentData = (qrData) => {
  const required = ["payment_uri", "amount", "recipient"];
  const missing = required.filter((field) => !qrData[field]);

  if (missing.length) {
    throw new Error(`Missing required fields: ${missing.join(", ")}`);
  }
};</code></pre>
    </div>

    <h2><span class="emoji">🚀</span>Performance Metrics</h2>

    <div class="tech-stack-box">
      <h3>Load Times</h3>
      <ul>
        <li><strong>Initial App Load:</strong> ~2.5s (with code splitting)</li>
        <li><strong>3D Model Loading:</strong> ~1-3s per model</li>
        <li><strong>QR Generation:</strong> ~100-300ms</li>
        <li><strong>Database Queries:</strong> ~200-500ms</li>
      </ul>

      <h3>Bundle Size</h3>
      <div class="code-block">
        <div class="language-label">JSON</div>
        <pre><code>{
  "total_bundle": "2.1MB",
  "main_chunk": "850KB",
  "vendor_chunk": "1.2MB",
  "assets": "50KB"
}</code></pre>
      </div>
    </div>

    <h2><span class="emoji">🔧</span>Development Environment</h2>

    <h3>Local Development Setup</h3>
    <div class="code-block">
      <div class="language-label">Bash</div>
      <pre><code># Install dependencies
npm install

# Start development server
npm run dev

# Available at: http://localhost:5173/</code></pre>
    </div>

    <h3>Environment Variables</h3>
    <div class="code-block">
      <div class="language-label">Bash</div>
      <pre><code>VITE_SUPABASE_URL=https://ncjbwzibnqrbrvicdmec.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
VITE_SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
    </div>

    <h2><span class="emoji">📋</span>AgentSphere Integration</h2>

    <div class="info-box">
      <h3>Integration Points</h3>
      <ul>
        <li>
          <strong>Shared Database:</strong> Common Supabase project for agent
          data
        </li>
        <li>
          <strong>Real-time Updates:</strong> Live synchronization via Supabase
          subscriptions
        </li>
        <li>
          <strong>Schema Compatibility:</strong> Aligned data models across
          platforms
        </li>
        <li>
          <strong>API Compatibility:</strong> RESTful endpoints compatible with
          AgentSphere backend
        </li>
      </ul>
    </div>

    <h3>Data Synchronization</h3>
    <div class="code-block">
      <div class="language-label">JavaScript</div>
      <pre><code>// Agent data sync
const syncWithAgentSphere = async () => {
  const { data } = await supabase
    .from("deployed_objects")
    .select("*")
    .eq("is_active", true);

  return data.map((agent) => ({
    ...agent,
    // Add AR-specific properties
    model_url: getDefaultModel(agent.agent_type),
    ar_scale: [1.0, 1.0, 1.0],
    ar_position: calculateARPosition(agent),
  }));
};</code></pre>
    </div>

    <h2><span class="emoji">📈</span>Future Roadmap</h2>

    <div class="warning-box">
      <h3>Immediate Priorities</h3>
      <ol>
        <li>
          <strong>Production Deployment:</strong> AWS/Vercel deployment setup
        </li>
        <li>
          <strong>Mobile AR:</strong> WebXR support for native AR experiences
        </li>
        <li>
          <strong>Performance:</strong> Bundle optimization and code splitting
        </li>
        <li><strong>Security Audit:</strong> Comprehensive security review</li>
      </ol>
    </div>

    <div class="info-box">
      <h3>Enhanced Features</h3>
      <ol>
        <li>
          <strong>Multi-Token Support:</strong> Multiple tokens per network
        </li>
        <li><strong>Real-time Pricing:</strong> Dynamic token price updates</li>
        <li>
          <strong>Transaction History:</strong> Payment tracking and history
        </li>
        <li><strong>Analytics:</strong> User behavior insights and metrics</li>
      </ol>
    </div>

    <div class="footer">
      <p><strong>Repository:</strong> ar-agent-viewer-web-man-US</p>
      <p>
        This technical summary provides comprehensive API documentation, system
        architecture, and integration details for the AR Agent Viewer Web
        project as of August 25, 2025.
      </p>
    </div>
  </body>
</html>
